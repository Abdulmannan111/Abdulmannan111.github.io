import "./chunk-VK5M77CT.js";

// node_modules/@cloudcannon/visual-editor-connector/index.js
var listeners = [];
function onLiveEditorLoad(CloudCannon) {
  CloudCannon.enableEvents();
}
async function onCloudCannonChanges(callback) {
  if (!window.CloudCannon) {
    document.addEventListener("cloudcannon:load", function(e) {
      onLiveEditorLoad(e.detail.CloudCannon);
    });
  } else {
    onLiveEditorLoad(window.CloudCannon);
  }
  const listener = async (e) => {
    const { CloudCannon } = e.detail;
    const latestValue = await CloudCannon.value();
    callback(latestValue);
  };
  document.addEventListener("cloudcannon:update", listener);
  listeners.push(listener);
}
async function stopCloudCannonChanges() {
  for (let i = 0; i < listeners.length; i++) {
    const listener = listeners[i];
    document.removeEventListener("cloudcannon:update", listener);
  }
  listeners = [];
}
export {
  onCloudCannonChanges,
  stopCloudCannonChanges
};
//# sourceMappingURL=@cloudcannon_svelte-connector.js.map
